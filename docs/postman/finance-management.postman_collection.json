{
  "info": {
    "_postman_id": "finance-management-api-v1",
    "name": "Finance Management API",
    "description": "Personal Finance Management API â€” Phase 1 (Auth + Users) + Phase 2 (Wallets, Categories, Transactions)\n\n## Setup\n1. Import this collection into Postman\n2. Set the `baseUrl` variable to `http://localhost:3000/api` (already done)\n3. Run **Register** or **Login** â€” the `token` variable is saved automatically\n4. All protected routes use `{{token}}` automatically\n5. After creating a wallet/category, copy the `id` into the `walletId` / `categoryId` collection variables for convenience\n\n## Variables\n- `baseUrl` â€” API base URL (default: http://localhost:3000/api)\n- `token` â€” JWT access token (auto-saved after register/login)\n- `walletId` â€” set manually after creating a wallet\n- `categoryId` â€” set manually after creating a category",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string",
      "description": "Base URL of the API. Change this to your deployed URL when testing in staging/production."
    },
    {
      "key": "token",
      "value": "",
      "type": "string",
      "description": "JWT access token. Automatically saved after a successful login or register request."
    },
    {
      "key": "walletId",
      "value": "",
      "type": "string",
      "description": "Set this after creating a wallet. Used as a convenience variable in transaction requests."
    },
    {
      "key": "categoryId",
      "value": "",
      "type": "string",
      "description": "Set this after creating a category. Used as a convenience variable in transaction requests."
    }
  ],
  "item": [
    {
      "name": "Auth",
      "description": "Registration, login, and token management.\n\nAfter calling Register or Login, the `token` variable is automatically saved so all protected routes work without manual copy-paste.",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Automatically save the token after a successful registration",
                  "if (pm.response.code === 201) {",
                  "    const body = pm.response.json();",
                  "    pm.collectionVariables.set('token', body.data.accessToken);",
                  "    console.log('Token saved:', body.data.accessToken.substring(0, 20) + '...');",
                  "}",
                  "",
                  "pm.test('Status is 201 Created', () => {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has accessToken', () => {",
                  "    const body = pm.response.json();",
                  "    pm.expect(body.data).to.have.property('accessToken');",
                  "    pm.expect(body.data.accessToken).to.be.a('string');",
                  "});",
                  "",
                  "pm.test('Response has user object (no password)', () => {",
                  "    const body = pm.response.json();",
                  "    const user = body.data.user;",
                  "    pm.expect(user).to.have.property('id');",
                  "    pm.expect(user).to.have.property('email');",
                  "    pm.expect(user).to.have.property('firstName');",
                  "    pm.expect(user).to.have.property('lastName');",
                  "    pm.expect(user).to.not.have.property('password');",
                  "});",
                  "",
                  "pm.test('Response is wrapped in standard envelope', () => {",
                  "    const body = pm.response.json();",
                  "    pm.expect(body).to.have.property('success', true);",
                  "    pm.expect(body).to.have.property('data');",
                  "    pm.expect(body).to.have.property('timestamp');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Creates a new user account.\n\n**Returns:** JWT access token + user object (no password field)\n\n**Auto-saves** the token to the `token` collection variable so you don't need to copy-paste it.\n\n**Validation rules:**\n- `email` â€” must be a valid email format\n- `password` â€” minimum 8 characters, maximum 100\n- `firstName` â€” required, max 50 characters\n- `lastName` â€” required, max 50 characters\n\n**Error cases:**\n- `400` â€” validation failed (see error message for which field)\n- `409` â€” email is already registered"
          },
          "response": [
            {
              "name": "Success â€” 201 Created",
              "originalRequest": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/register",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "register"]
                }
              },
              "status": "Created",
              "code": 201,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAiLCJlbWFpbCI6ImpvaG4uZG9lQGV4YW1wbGUuY29tIiwiaWF0IjoxNzA5MTE2ODAwLCJleHAiOjE3MDk3MjE2MDB9.signature\",\n    \"user\": {\n      \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n      \"email\": \"john.doe@example.com\",\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"createdAt\": \"2026-02-28T10:00:00.000Z\",\n      \"updatedAt\": \"2026-02-28T10:00:00.000Z\"\n    }\n  },\n  \"timestamp\": \"2026-02-28T10:00:00.000Z\"\n}"
            },
            {
              "name": "Error â€” 409 Email Already Exists",
              "originalRequest": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/register",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "register"]
                }
              },
              "status": "Conflict",
              "code": 409,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"statusCode\": 409,\n  \"message\": \"A user with this email already exists\",\n  \"error\": \"ConflictException\",\n  \"timestamp\": \"2026-02-28T10:00:00.000Z\",\n  \"path\": \"/api/auth/register\"\n}"
            },
            {
              "name": "Error â€” 400 Validation Failed",
              "originalRequest": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"not-an-email\",\n  \"password\": \"short\",\n  \"firstName\": \"\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/register",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "register"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"statusCode\": 400,\n  \"message\": [\"email must be an email\", \"password must be longer than or equal to 8 characters\", \"firstName should not be empty\"],\n  \"error\": \"Bad Request\",\n  \"timestamp\": \"2026-02-28T10:00:00.000Z\",\n  \"path\": \"/api/auth/register\"\n}"
            }
          ]
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Automatically save the token after a successful login",
                  "if (pm.response.code === 200) {",
                  "    const body = pm.response.json();",
                  "    pm.collectionVariables.set('token', body.data.accessToken);",
                  "    console.log('Token saved:', body.data.accessToken.substring(0, 20) + '...');",
                  "}",
                  "",
                  "pm.test('Status is 200 OK', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has accessToken', () => {",
                  "    const body = pm.response.json();",
                  "    pm.expect(body.data).to.have.property('accessToken');",
                  "    pm.expect(body.data.accessToken).to.be.a('string');",
                  "});",
                  "",
                  "pm.test('Response has user object (no password)', () => {",
                  "    const body = pm.response.json();",
                  "    const user = body.data.user;",
                  "    pm.expect(user).to.have.property('id');",
                  "    pm.expect(user).to.not.have.property('password');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Authenticates an existing user.\n\n**Returns:** JWT access token + user object (no password field)\n\n**Auto-saves** the token to the `token` collection variable.\n\n**Security note:** Both wrong email and wrong password return the same `401 Invalid credentials` error. This is intentional â€” it prevents attackers from learning which emails are registered (user enumeration attack).\n\n**Error cases:**\n- `400` â€” missing or invalid email format\n- `401` â€” wrong email or wrong password (same message for both)"
          },
          "response": [
            {
              "name": "Success â€” 200 OK",
              "originalRequest": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePass123\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "login"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAiLCJlbWFpbCI6ImpvaG4uZG9lQGV4YW1wbGUuY29tIiwiaWF0IjoxNzA5MTE2ODAwLCJleHAiOjE3MDk3MjE2MDB9.signature\",\n    \"user\": {\n      \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n      \"email\": \"john.doe@example.com\",\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"createdAt\": \"2026-02-28T10:00:00.000Z\",\n      \"updatedAt\": \"2026-02-28T10:00:00.000Z\"\n    }\n  },\n  \"timestamp\": \"2026-02-28T10:00:00.000Z\"\n}"
            },
            {
              "name": "Error â€” 401 Invalid Credentials",
              "originalRequest": {
                "method": "POST",
                "header": [{"key": "Content-Type", "value": "application/json"}],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"WrongPassword\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "login"]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"statusCode\": 401,\n  \"message\": \"Invalid credentials\",\n  \"error\": \"UnauthorizedException\",\n  \"timestamp\": \"2026-02-28T10:00:00.000Z\",\n  \"path\": \"/api/auth/login\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Users",
      "description": "User profile endpoints. All routes require a valid JWT token.\n\nThe `token` variable is automatically set after Register or Login â€” no manual copy-paste needed.",
      "item": [
        {
          "name": "Get My Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 OK', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Returns user profile without password', () => {",
                  "    const body = pm.response.json();",
                  "    const user = body.data;",
                  "    pm.expect(user).to.have.property('id');",
                  "    pm.expect(user).to.have.property('email');",
                  "    pm.expect(user).to.have.property('firstName');",
                  "    pm.expect(user).to.have.property('lastName');",
                  "    pm.expect(user).to.have.property('createdAt');",
                  "    pm.expect(user).to.not.have.property('password');",
                  "});",
                  "",
                  "pm.test('Response is wrapped in standard envelope', () => {",
                  "    const body = pm.response.json();",
                  "    pm.expect(body).to.have.property('success', true);",
                  "    pm.expect(body).to.have.property('timestamp');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me"]
            },
            "description": "Returns the authenticated user's profile.\n\n**Requires:** `Authorization: Bearer <token>` header (auto-filled from `{{token}}`)\n\n**Returns:** User object without password\n\n**Error cases:**\n- `401` â€” missing token, invalid token, or expired token"
          },
          "response": [
            {
              "name": "Success â€” 200 OK",
              "originalRequest": {
                "method": "GET",
                "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
                "url": {
                  "raw": "{{baseUrl}}/users/me",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "me"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"email\": \"john.doe@example.com\",\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"createdAt\": \"2026-02-28T10:00:00.000Z\",\n    \"updatedAt\": \"2026-02-28T10:00:00.000Z\"\n  },\n  \"timestamp\": \"2026-02-28T10:00:00.000Z\"\n}"
            },
            {
              "name": "Error â€” 401 Unauthorized (missing/invalid token)",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/me",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "me"]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"statusCode\": 401,\n  \"message\": \"Unauthorized\",\n  \"error\": \"UnauthorizedException\",\n  \"timestamp\": \"2026-02-28T10:00:00.000Z\",\n  \"path\": \"/api/users/me\"\n}"
            }
          ]
        },
        {
          "name": "Update My Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status is 200 OK', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Returns updated user without password', () => {",
                  "    const body = pm.response.json();",
                  "    const user = body.data;",
                  "    pm.expect(user).to.have.property('id');",
                  "    pm.expect(user).to.have.property('email');",
                  "    pm.expect(user).to.not.have.property('password');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Jane\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["users", "me"]
            },
            "description": "Updates the authenticated user's profile. All fields are optional â€” only send what you want to change.\n\n**Requires:** `Authorization: Bearer <token>` header (auto-filled from `{{token}}`)\n\n**Updatable fields** (all optional):\n- `firstName` â€” max 50 characters\n- `lastName` â€” max 50 characters\n- `email` â€” must be unique across all users\n- `password` â€” min 8 characters (will be re-hashed automatically)\n\n**Error cases:**\n- `400` â€” validation failed\n- `401` â€” missing or invalid token\n- `409` â€” new email is already taken by another account"
          },
          "response": [
            {
              "name": "Success â€” 200 OK (firstName updated)",
              "originalRequest": {
                "method": "PATCH",
                "header": [
                  {"key": "Authorization", "value": "Bearer {{token}}"},
                  {"key": "Content-Type", "value": "application/json"}
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"firstName\": \"Jane\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/me",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "me"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"email\": \"john.doe@example.com\",\n    \"firstName\": \"Jane\",\n    \"lastName\": \"Doe\",\n    \"createdAt\": \"2026-02-28T10:00:00.000Z\",\n    \"updatedAt\": \"2026-02-28T11:00:00.000Z\"\n  },\n  \"timestamp\": \"2026-02-28T11:00:00.000Z\"\n}"
            },
            {
              "name": "Error â€” 409 Email Already Taken",
              "originalRequest": {
                "method": "PATCH",
                "header": [
                  {"key": "Authorization", "value": "Bearer {{token}}"},
                  {"key": "Content-Type", "value": "application/json"}
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"someone.else@example.com\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/me",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "me"]
                }
              },
              "status": "Conflict",
              "code": 409,
              "header": [{"key": "Content-Type", "value": "application/json"}],
              "body": "{\n  \"statusCode\": 409,\n  \"message\": \"A user with this email already exists\",\n  \"error\": \"ConflictException\",\n  \"timestamp\": \"2026-02-28T11:00:00.000Z\",\n  \"path\": \"/api/users/me\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Wallets",
      "description": "Financial wallet (account) management. All routes require JWT.\n\nAfter creating a wallet, copy its `id` into the `walletId` collection variable.",
      "item": [
        {
          "name": "Create Wallet",
          "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 201) { const b = pm.response.json(); pm.collectionVariables.set('walletId', b.data.id); console.log('walletId saved:', b.data.id); }", "pm.test('Status 201', () => pm.response.to.have.status(201));", "pm.test('Has balance of 0', () => { const b = pm.response.json(); pm.expect(b.data.balance).to.equal('0'); });"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"name\": \"Main Checking\",\n  \"type\": \"CHECKING\",\n  \"currency\": \"USD\",\n  \"description\": \"Primary day-to-day account\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/wallets", "host": ["{{baseUrl}}"], "path": ["wallets"]},
            "description": "Creates a wallet. Balance starts at 0 and is updated automatically by transactions.\n\nWallet types: CHECKING, SAVINGS, CREDIT_CARD, INVESTMENT, CASH, OTHER\n\n**Auto-saves** the wallet `id` to the `walletId` variable."
          }
        },
        {
          "name": "Create Savings Wallet",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"name\": \"Emergency Fund\",\n  \"type\": \"SAVINGS\",\n  \"currency\": \"USD\",\n  \"description\": \"3-month emergency reserve\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/wallets", "host": ["{{baseUrl}}"], "path": ["wallets"]},
            "description": "Create a second wallet for transfer testing. Copy the returned `id` for use in TRANSFER transactions."
          }
        },
        {
          "name": "List Wallets",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));", "pm.test('Returns array', () => { const b = pm.response.json(); pm.expect(b.data).to.be.an('array'); });"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/wallets", "host": ["{{baseUrl}}"], "path": ["wallets"]},
            "description": "Returns all active wallets for the authenticated user, ordered by name."
          }
        },
        {
          "name": "Get Wallet by ID",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/wallets/{{walletId}}", "host": ["{{baseUrl}}"], "path": ["wallets", "{{walletId}}"]},
            "description": "Uses the `walletId` variable (auto-set when you created a wallet)."
          }
        },
        {
          "name": "Update Wallet",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "PATCH",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"description\": \"Updated description\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/wallets/{{walletId}}", "host": ["{{baseUrl}}"], "path": ["wallets", "{{walletId}}"]},
            "description": "Updates wallet metadata. Balance is NOT updatable here â€” it's controlled by transactions."
          }
        },
        {
          "name": "Deactivate Wallet",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "DELETE",
            "url": {"raw": "{{baseUrl}}/wallets/{{walletId}}", "host": ["{{baseUrl}}"], "path": ["wallets", "{{walletId}}"]},
            "description": "Soft-deletes the wallet (sets isActive=false). Returns 400 if the wallet has transactions."
          }
        }
      ]
    },
    {
      "name": "Categories",
      "description": "Income/expense category management. All routes require JWT.\n\nAfter creating a category, copy its `id` into the `categoryId` collection variable.",
      "item": [
        {
          "name": "Create Income Category",
          "event": [{"listen": "test", "script": {"exec": ["if (pm.response.code === 201) { const b = pm.response.json(); pm.collectionVariables.set('categoryId', b.data.id); console.log('categoryId saved:', b.data.id); }", "pm.test('Status 201', () => pm.response.to.have.status(201));"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"name\": \"Salary\",\n  \"type\": \"INCOME\",\n  \"color\": \"#4CAF50\",\n  \"icon\": \"ðŸ’°\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/categories", "host": ["{{baseUrl}}"], "path": ["categories"]},
            "description": "Creates an INCOME category. **Auto-saves** the `id` to `categoryId` variable."
          }
        },
        {
          "name": "Create Expense Category",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"name\": \"Food & Dining\",\n  \"type\": \"EXPENSE\",\n  \"color\": \"#FF5722\",\n  \"icon\": \"ðŸ”\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/categories", "host": ["{{baseUrl}}"], "path": ["categories"]},
            "description": "Creates an EXPENSE category."
          }
        },
        {
          "name": "List All Categories",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/categories", "host": ["{{baseUrl}}"], "path": ["categories"]},
            "description": "Returns all categories for the user, sorted by type then name."
          }
        },
        {
          "name": "List EXPENSE Categories Only",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/categories?type=EXPENSE", "host": ["{{baseUrl}}"], "path": ["categories"], "query": [{"key": "type", "value": "EXPENSE"}]},
            "description": "Filter categories by type. Use `type=INCOME` or `type=EXPENSE`."
          }
        },
        {
          "name": "Get Category by ID",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/categories/{{categoryId}}", "host": ["{{baseUrl}}"], "path": ["categories", "{{categoryId}}"]}
          }
        },
        {
          "name": "Update Category",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "PATCH",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"color\": \"#2196F3\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/categories/{{categoryId}}", "host": ["{{baseUrl}}"], "path": ["categories", "{{categoryId}}"]}
          }
        },
        {
          "name": "Delete Category",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "DELETE",
            "url": {"raw": "{{baseUrl}}/categories/{{categoryId}}", "host": ["{{baseUrl}}"], "path": ["categories", "{{categoryId}}"]},
            "description": "Deletes the category. Transactions referencing it will have categoryId set to NULL (not deleted)."
          }
        }
      ]
    },
    {
      "name": "Transactions",
      "description": "Financial transaction management. All routes require JWT.\n\nâš ï¸ Every CREATE/UPDATE/DELETE automatically updates wallet balances.\n\nRecommended test order:\n1. Create two wallets\n2. Create categories (one INCOME, one EXPENSE)\n3. Create INCOME transaction â†’ check wallet balance increased\n4. Create EXPENSE transaction â†’ check balance decreased\n5. Create TRANSFER â†’ check both wallet balances\n6. Update a transaction â†’ verify balance recalculated\n7. Delete a transaction â†’ verify balance reversed",
      "item": [
        {
          "name": "Create INCOME Transaction",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 201', () => pm.response.to.have.status(201));", "pm.test('Has account info embedded', () => { const b = pm.response.json(); pm.expect(b.data.account).to.have.property('name'); });", "pm.test('toAccount is null for INCOME', () => { const b = pm.response.json(); pm.expect(b.data.toAccount).to.be.null; });"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"amount\": 5000.00,\n  \"type\": \"INCOME\",\n  \"accountId\": \"{{walletId}}\",\n  \"categoryId\": \"{{categoryId}}\",\n  \"date\": \"2026-02-28\",\n  \"description\": \"February salary\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/transactions", "host": ["{{baseUrl}}"], "path": ["transactions"]},
            "description": "Creates an INCOME transaction. The wallet balance will increase by the amount.\n\nPre-requisite: Set `walletId` and `categoryId` (INCOME type) variables."
          }
        },
        {
          "name": "Create EXPENSE Transaction",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 201', () => pm.response.to.have.status(201));"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"amount\": 120.50,\n  \"type\": \"EXPENSE\",\n  \"accountId\": \"{{walletId}}\",\n  \"date\": \"2026-02-28\",\n  \"description\": \"Weekly groceries\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/transactions", "host": ["{{baseUrl}}"], "path": ["transactions"]},
            "description": "Creates an EXPENSE transaction. Wallet balance decreases by amount. categoryId is optional here."
          }
        },
        {
          "name": "Create TRANSFER Transaction",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 201', () => pm.response.to.have.status(201));", "pm.test('Has toAccount embedded', () => { const b = pm.response.json(); pm.expect(b.data.toAccount).to.not.be.null; pm.expect(b.data.toAccount).to.have.property('name'); });"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"amount\": 1000.00,\n  \"type\": \"TRANSFER\",\n  \"accountId\": \"REPLACE_WITH_FROM_WALLET_ID\",\n  \"toAccountId\": \"REPLACE_WITH_TO_WALLET_ID\",\n  \"date\": \"2026-02-28\",\n  \"description\": \"Transfer to savings\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/transactions", "host": ["{{baseUrl}}"], "path": ["transactions"]},
            "description": "Creates a TRANSFER between two of your wallets.\n\nReplaces both accountId and toAccountId with actual wallet UUIDs.\nNote: TRANSFER cannot have a categoryId."
          }
        },
        {
          "name": "List All Transactions",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));", "pm.test('Returns sorted array', () => { const b = pm.response.json(); pm.expect(b.data).to.be.an('array'); });"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/transactions", "host": ["{{baseUrl}}"], "path": ["transactions"]},
            "description": "Returns all transactions for the user, sorted by date descending (newest first)."
          }
        },
        {
          "name": "List Transactions â€” Filter by Wallet",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/transactions?walletId={{walletId}}", "host": ["{{baseUrl}}"], "path": ["transactions"], "query": [{"key": "walletId", "value": "{{walletId}}"}]},
            "description": "Returns transactions where this wallet is either the source OR destination. Useful for showing all activity on one wallet."
          }
        },
        {
          "name": "List Transactions â€” Filter by Type",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/transactions?type=EXPENSE", "host": ["{{baseUrl}}"], "path": ["transactions"], "query": [{"key": "type", "value": "EXPENSE"}]},
            "description": "Filter by INCOME, EXPENSE, or TRANSFER."
          }
        },
        {
          "name": "List Transactions â€” Date Range",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/transactions?startDate=2026-02-01&endDate=2026-02-28", "host": ["{{baseUrl}}"], "path": ["transactions"], "query": [{"key": "startDate", "value": "2026-02-01"}, {"key": "endDate", "value": "2026-02-28"}]},
            "description": "ISO 8601 dates. Inclusive on both ends."
          }
        },
        {
          "name": "Get Transaction by ID",
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "GET",
            "url": {"raw": "{{baseUrl}}/transactions/REPLACE_WITH_TRANSACTION_ID", "host": ["{{baseUrl}}"], "path": ["transactions", "REPLACE_WITH_TRANSACTION_ID"]}
          }
        },
        {
          "name": "Update Transaction",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));", "pm.test('Balance recalculated', () => { pm.response.to.have.status(200); });"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "PATCH",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {"mode": "raw", "raw": "{\n  \"amount\": 5500.00,\n  \"description\": \"February salary + bonus\"\n}", "options": {"raw": {"language": "json"}}},
            "url": {"raw": "{{baseUrl}}/transactions/REPLACE_WITH_TRANSACTION_ID", "host": ["{{baseUrl}}"], "path": ["transactions", "REPLACE_WITH_TRANSACTION_ID"]},
            "description": "Updates a transaction. Balance is automatically recalculated using the reverse+apply pattern.\n\nYou can change any field: amount, type, accountId, toAccountId, categoryId, date, description."
          }
        },
        {
          "name": "Delete Transaction",
          "event": [{"listen": "test", "script": {"exec": ["pm.test('Status 200', () => pm.response.to.have.status(200));", "pm.test('Balance reversed', () => { pm.response.to.have.status(200); });"], "type": "text/javascript"}}],
          "request": {
            "auth": {"type": "bearer", "bearer": [{"key": "token", "value": "{{token}}", "type": "string"}]},
            "method": "DELETE",
            "url": {"raw": "{{baseUrl}}/transactions/REPLACE_WITH_TRANSACTION_ID", "host": ["{{baseUrl}}"], "path": ["transactions", "REPLACE_WITH_TRANSACTION_ID"]},
            "description": "Deletes the transaction and reverses its balance effect on the wallet(s)."
          }
        }
      ]
    }
  ]
}
